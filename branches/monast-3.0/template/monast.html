
<!--
/*
* Copyright (c) 2008, Diego Aguirre
* All rights reserved.
* 
* Redistribution and use in source and binary forms, with or without modification,
* are permitted provided that the following conditions are met:
* 
*     * Redistributions of source code must retain the above copyright notice, 
*       this list of conditions and the following disclaimer.
*     * Redistributions in binary form must reproduce the above copyright notice, 
*       this list of conditions and the following disclaimer in the documentation 
*       and/or other materials provided with the distribution.
*     * Neither the name of the DagMoller nor the names of its contributors
*       may be used to endorse or promote products derived from this software 
*       without specific prior written permission.
* 
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
* ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED 
* WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
* IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, 
* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, 
* BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
* LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE 
* OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
* OF THE POSSIBILITY OF SUCH DAMAGE.
*/ 
 -->

<div id="TabPannel" class="yui-navset" >
  <ul class="yui-nav">
    <li><a href="#tab0"><em>Mixed Pannels</em></a></li>
    <li><a href="#tab1"><em>Peers/Users</em></a></li>
    <li><a href="#tab2"><em>Meetme Rooms</em></a></li>
    <li><a href="#tab3"><em>Channels/Calls</em></a></li>
    <li><a href="#tab4"><em>Parked Calls</em></a></li>
    <li><a href="#tab5"><em>Queues</em></a></li>
    <!-- START BLOCK : cli_tab -->
    <li><a href="#tab6"><em>Asterisk CLI</em></a></li>
    <!-- END BLOCK : cli_tab -->
    <!-- START BLOCK : debug_tab -->
    <li><a href="#tab7"><em>Debug</em></a></li>
    <!-- END BLOCK : debug_tab -->
  </ul>
  
  <div class="yui-content"> 
    <div id="mixed">
      <fieldset id="pannelsToShow">
        <legend>Pannels to Show</legend> 
        <input id="checkBoxTab1" type="checkbox" name="checkBoxTab1" value="peersDiv">
        <input id="checkBoxTab2" type="checkbox" name="checkBoxTab2" value="meetmesDiv">
        <input id="checkBoxTab3" type="checkbox" name="checkBoxTab3" value="chanCallDiv">
        <input id="checkBoxTab4" type="checkbox" name="checkBoxTab4" value="parkedCallsDiv">
        <input id="checkBoxTab5" type="checkbox" name="checkBoxTab5" value="queuesDiv">
      </fieldset>
    </div>
  
    <div id="peersDiv">
    <fieldset>
      <legend>Peers/Users</legend>
      <div id="peersDivWraper"> 

      <!-- START BLOCK : technology -->
      <fieldset id="fieldset-{technology}">
        <legend>{technology} ({count})</legend>
      </fieldset>
      <!-- END BLOCK : technology -->
      
      </div>
      <div style="clear: both;"></div>
    </fieldset>
    </div>
    
    <div id="meetmesDiv">
    <fieldset>
      <legend>Meetme Rooms</legend> 
      <div id="meetmeDivWrapper">
      </div>
    </fieldset>
    </div>
    
    <div id="chanCallDiv">
    <fieldset>
      <legend>Channels/Calls</legend> 
      <div id="channelsDiv">
        <div class="channelDiv">
          <table width="330">
            <tr>
              <td class="tableTitle" align="center" colspan="2">Channels (<span id="countChannels">0</span>)</td>
            </tr>
            <tr>
              <td class="statusHeader" align="center" width="260">Channel</td>
              <td class="statusHeader" align="center" width="70">Status</td>
            </tr>
          </table>
        </div>
      </div>
      <div id="callsDiv">
        <div class="callDiv">
          <table width="570">
            <tr>
              <td class="tableTitle" align="center" colspan="3">Calls (<span id="countCalls">0</span>)</td>
            </tr>
            <tr>
              <td class="statusHeader" align="center" width="250">SRC Channel</td>
              <td class="statusHeader" align="center" width="70">Status</td>
              <td class="statusHeader" align="center" width="250">DST Channel</td>
            </tr>
          </table>
        </div>
      </div>
      <div style="clear: both;"></div>
    </fieldset>
    </div>
    
    <div id="parkedCallsDiv">
    <fieldset>
      <legend>Parked Calls</legend>
      <div id="parkedsDiv">
        <div class="parkedDiv">
          <table width="600">
            <tr>
              <td class="tableTitle" align="center" colspan="3">Parked Calls (<span id="countParked">0</span>)</td>
            </tr>
            <tr>
              <td class="statusHeader" align="center" width="80">Exten</td>
              <td class="statusHeader" align="center" width="260">Parked From</td>
              <td class="statusHeader" align="center" width="260">Parked Channel</td>
            </tr>
          </table>
        </div>
      </div>
    </fieldset>
    </div>
    
    <div id="queuesDiv">
    <fieldset>
      <legend>Queues</legend>
      <!-- START BLOCK : queueDualDiv -->
      <div class="queueDualDiv"><!-- inicio -->
      <!-- START BLOCK : queue -->
      <div class="queueDiv">
        <fieldset>
          <legend>Queue: {queue}</legend>
          <div class="queueStatisticsDiv">
            <table width="532">
              <tr>
                <td class="tableTitle" colspan="8" align="center">Statistics</td>
              </tr>
              <tr>
                <td class="statusHeader" align="right">Max:&nbsp;</td>
                <td class="status"><span id="queueStatsMax-{queue}">0</span></td>
                
                <td class="statusHeader" align="right">Calls:&nbsp;</td>
                <td class="status"><span id="queueStatsCalls-{queue}">0</span></td>
                
                <td class="statusHeader" align="right">Holdtime:&nbsp;</td>
                <td class="status"><span id="queueStatsHoldtime-{queue}">0</span></td>
                
                <td class="statusHeader" align="right">Completed:&nbsp;</td>
                <td class="status"><span id="queueStatsCompleted-{queue}">0</span></td>
              </tr>
              <tr>
                <td class="statusHeader" align="right">Abandoned:&nbsp;</td>
                <td class="status"><span id="queueStatsAbandoned-{queue}">0</span></td>
                
                <td class="statusHeader" align="right">Service Level:&nbsp;</td>
                <td class="status"><span id="queueStatsServiceLevel-{queue}">0</span></td>
                
                <td class="statusHeader" align="right">Service level Perf.:&nbsp;</td>
                <td class="status"><span id="queueStatsServicelevelPerf-{queue}">0.0</span></td>
                
                <td class="statusHeader" align="right">Weight:&nbsp;</td>
                <td class="status"><span id="queueStatsWeight-{queue}">0</span></td>
              </tr>
            </table>
          </div>
          <div class="queueMembersDivWrap" id="queueMembers-{queue}">
            <div class="queueMembersDiv" id="queueMembersDrop-{queue}">
              <table width="300">
                <tr>
                  <td class="tableTitle" colspan="3" align="center">Members (<span id="queueMembersCount-{queue}">0</span>)</td>
                </tr>
                <tr>
                  <td class="statusHeader" width="170" align="center">Location/Name</td>
                  <td class="statusHeader" width="40" align="center">Calls Taken</td>
                  <td class="statusHeader" width="90" align="center">Status</td>
                </tr>
              </table>
            </div>
          </div>
          <div class="queueClientsDivWrap" id="queueClients-{queue}">
            <div class="queueClientsDiv">
              <table width="220">
                <tr>
                  <td class="tableTitle" align="center">Clients (<span id="queueClientsCount-{queue}">0</span>)</td>
                </tr>
              </table>
            </div>
          </div>
        </fieldset>
      </div>
      <!-- END BLOCK : queue -->
      </div><!-- fim -->
      <!-- END BLOCK : queueDualDiv -->
      <div style="clear: both;"></div>
    </fieldset>
    </div>

    <!-- START BLOCK : cli_tab_div -->
	<div id="cliDiv">
	  <textarea id="cliResponse" rows="40" cols="160" readonly="readonly"></textarea><br>
	  <input id="cliCommand" type="text" size="60" onkeypress="sendCliCommandOnEnter(event)">
	  &nbsp;<button onclick="sendCliCommand()">Send</button>&nbsp;<button onclick="$('cliResponse').value=''">Clear</button>
	</div>
	<!-- END BLOCK : cli_tab_div -->

    <!-- START BLOCK : debug_tab_div -->
    <div id="debugMsg">
    </div>
    <!-- END BLOCK : debug_tab_div -->
    
  </div>
</div>

{templates}

<script language="javascript">
var MONAST_CALL_TIME = {MONAST_CALL_TIME};

Monast.init();

window.onload = function () {
	<!-- START BLOCK : process -->
	Monast.processEvent('{json}'.evalJSON());
	<!-- END BLOCK : process -->

	setTimeout('Monast.requestStatus()', 1000);
}
</script>
